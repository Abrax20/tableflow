{
    "swagger": "2.0",
    "info": {
        "description": "The backend API of the TableFlow application.",
        "title": "TableFlow API",
        "termsOfService": "https://tableflow.com/terms",
        "contact": {
            "name": "TableFlow",
            "url": "https://tableflow.com",
            "email": "support@tableflow.com"
        },
        "version": "1.2"
    },
    "host": "localhost:3003",
    "basePath": "/",
    "paths": {
        "/admin/v1/import/{id}": {
            "get": {
                "description": "Get a single import",
                "tags": [
                    "Import"
                ],
                "summary": "Get import",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Import ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/model.Import"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/types.Res"
                        }
                    }
                }
            }
        },
        "/admin/v1/importer": {
            "post": {
                "description": "Create an importer",
                "tags": [
                    "Importer"
                ],
                "summary": "Create importer",
                "parameters": [
                    {
                        "description": "Request body",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/web.ImporterCreateRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/model.Importer"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/types.Res"
                        }
                    }
                }
            }
        },
        "/admin/v1/importer/{id}": {
            "get": {
                "description": "Get a single importer",
                "tags": [
                    "Importer"
                ],
                "summary": "Get importer",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Importer ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/model.Importer"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/types.Res"
                        }
                    }
                }
            },
            "post": {
                "description": "Edit an importer",
                "tags": [
                    "Importer"
                ],
                "summary": "Edit importer",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Importer ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Request body",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/web.ImporterEditRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/model.Importer"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/types.Res"
                        }
                    }
                }
            }
        },
        "/admin/v1/importers": {
            "get": {
                "description": "Get a list of importers",
                "tags": [
                    "Importer"
                ],
                "summary": "Get importers",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/model.Importer"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/types.Res"
                        }
                    }
                }
            }
        },
        "/admin/v1/imports": {
            "get": {
                "description": "Get a list of imports",
                "tags": [
                    "Import"
                ],
                "summary": "Get imports",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/model.Import"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/types.Res"
                        }
                    }
                }
            }
        },
        "/admin/v1/settings/api-key": {
            "get": {
                "description": "Get the current API key",
                "tags": [
                    "API Key"
                ],
                "summary": "Get API key",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/types.Res"
                        }
                    }
                }
            },
            "post": {
                "description": "Regenerate the current API key and return the new API key",
                "tags": [
                    "API Key"
                ],
                "summary": "Regenerate API key",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/types.Res"
                        }
                    }
                }
            }
        },
        "/admin/v1/template-column": {
            "post": {
                "description": "Create a template column",
                "tags": [
                    "Template"
                ],
                "summary": "Create template column",
                "parameters": [
                    {
                        "description": "Request body",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/web.TemplateColumnCreateRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/model.Template"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/types.Res"
                        }
                    }
                }
            }
        },
        "/admin/v1/template-column/{id}": {
            "delete": {
                "description": "Delete a template column",
                "tags": [
                    "Template"
                ],
                "summary": "Delete template column",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Template column ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/model.Template"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/types.Res"
                        }
                    }
                }
            }
        },
        "/admin/v1/template/{id}": {
            "get": {
                "description": "Get a single template",
                "tags": [
                    "Template"
                ],
                "summary": "Get template",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Template ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/model.Template"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/types.Res"
                        }
                    }
                }
            }
        },
        "/admin/v1/upload/{id}": {
            "get": {
                "description": "Get a single upload",
                "tags": [
                    "Upload"
                ],
                "summary": "Get upload",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Upload ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/model.Upload"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/types.Res"
                        }
                    }
                }
            }
        },
        "/v1/import/{id}": {
            "get": {
                "description": "Get an individual import",
                "tags": [
                    "External API"
                ],
                "summary": "Get import",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Import ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/model.Import"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/types.Res"
                        }
                    }
                }
            }
        },
        "/v1/import/{id}/download": {
            "get": {
                "description": "Download the import as a file",
                "tags": [
                    "External API"
                ],
                "summary": "Download import",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Import ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/types.Res"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "model.Import": {
            "type": "object",
            "properties": {
                "created_at": {
                    "type": "integer",
                    "example": 1682366228
                },
                "file_extension": {
                    "type": "string",
                    "example": "csv"
                },
                "file_size": {
                    "type": "integer",
                    "example": 1024
                },
                "file_type": {
                    "type": "string",
                    "example": "text/csv"
                },
                "id": {
                    "type": "string",
                    "example": "da5554e3-6c87-41b2-9366-5449a2f15b53"
                },
                "importer_id": {
                    "type": "string",
                    "example": "6de452a2-bd1f-4cb3-b29b-0f8a2e3d9353"
                },
                "is_stored": {
                    "type": "boolean",
                    "example": false
                },
                "metadata": {
                    "$ref": "#/definitions/model.JSONB"
                },
                "num_columns": {
                    "type": "integer",
                    "example": 8
                },
                "num_processed_values": {
                    "type": "integer",
                    "example": 128
                },
                "num_rows": {
                    "type": "integer",
                    "example": 256
                },
                "upload_id": {
                    "type": "string",
                    "example": "50ca61e1-f683-4b03-9ec4-4b3adb592bf1"
                },
                "workspace_id": {
                    "type": "string",
                    "example": "b2079476-261a-41fe-8019-46eb51c537f7"
                }
            }
        },
        "model.Importer": {
            "type": "object",
            "properties": {
                "allowed_domains": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "example": [
                        "example.com"
                    ]
                },
                "created_at": {
                    "type": "integer",
                    "example": 1682366228
                },
                "created_by": {
                    "$ref": "#/definitions/model.User"
                },
                "id": {
                    "type": "string",
                    "example": "6de452a2-bd1f-4cb3-b29b-0f8a2e3d9353"
                },
                "name": {
                    "type": "string",
                    "example": "Test Importer"
                },
                "template": {
                    "$ref": "#/definitions/model.Template"
                },
                "updated_at": {
                    "type": "integer",
                    "example": 1682366228
                },
                "updated_by": {
                    "$ref": "#/definitions/model.User"
                },
                "webhook_url": {
                    "type": "string",
                    "example": "https://api.tableflow.com/hooks"
                },
                "workspace_id": {
                    "type": "string",
                    "example": "b2079476-261a-41fe-8019-46eb51c537f7"
                }
            }
        },
        "model.JSONB": {
            "type": "object",
            "additionalProperties": true
        },
        "model.Template": {
            "type": "object",
            "properties": {
                "created_at": {
                    "type": "integer",
                    "example": 1682366228
                },
                "created_by": {
                    "$ref": "#/definitions/model.User"
                },
                "id": {
                    "type": "string",
                    "example": "f0797968-becc-422a-b135-19de1d8c5d46"
                },
                "importer_id": {
                    "type": "string",
                    "example": "6de452a2-bd1f-4cb3-b29b-0f8a2e3d9353"
                },
                "name": {
                    "type": "string",
                    "example": "My Template"
                },
                "template_columns": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/model.TemplateColumn"
                    }
                },
                "updated_at": {
                    "type": "integer",
                    "example": 1682366228
                },
                "updated_by": {
                    "$ref": "#/definitions/model.User"
                },
                "workspace_id": {
                    "type": "string",
                    "example": "b2079476-261a-41fe-8019-46eb51c537f7"
                }
            }
        },
        "model.TemplateColumn": {
            "type": "object",
            "properties": {
                "created_at": {
                    "type": "integer",
                    "example": 1682366228
                },
                "created_by": {
                    "$ref": "#/definitions/model.User"
                },
                "id": {
                    "type": "string",
                    "example": "a1ed136d-33ce-4b7e-a7a4-8a5ccfe54cd5"
                },
                "key": {
                    "type": "string",
                    "example": "email"
                },
                "name": {
                    "type": "string",
                    "example": "Email"
                },
                "required": {
                    "type": "boolean",
                    "example": false
                },
                "template_id": {
                    "type": "string",
                    "example": "f0797968-becc-422a-b135-19de1d8c5d46"
                },
                "updated_at": {
                    "type": "integer",
                    "example": 1682366228
                },
                "updated_by": {
                    "$ref": "#/definitions/model.User"
                }
            }
        },
        "model.Upload": {
            "type": "object",
            "properties": {
                "created_at": {
                    "type": "integer",
                    "example": 1682366228
                },
                "file_extension": {
                    "type": "string",
                    "example": "csv"
                },
                "file_name": {
                    "type": "string",
                    "example": "example.csv"
                },
                "file_size": {
                    "type": "integer",
                    "example": 1024
                },
                "file_type": {
                    "type": "string",
                    "example": "text/csv"
                },
                "id": {
                    "type": "string",
                    "example": "50ca61e1-f683-4b03-9ec4-4b3adb592bf1"
                },
                "importer_id": {
                    "type": "string",
                    "example": "6de452a2-bd1f-4cb3-b29b-0f8a2e3d9353"
                },
                "is_parsed": {
                    "type": "boolean",
                    "example": false
                },
                "is_stored": {
                    "type": "boolean",
                    "example": false
                },
                "metadata": {
                    "type": "string",
                    "example": "{\"user_id\": 1234}"
                },
                "num_columns": {
                    "type": "integer",
                    "example": 8
                },
                "num_rows": {
                    "type": "integer",
                    "example": 256
                },
                "tus_id": {
                    "type": "string",
                    "example": "ee715c254ee61855b465ed61be930487"
                },
                "upload_columns": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/model.UploadColumn"
                    }
                },
                "workspace_id": {
                    "type": "string",
                    "example": "b2079476-261a-41fe-8019-46eb51c537f7"
                }
            }
        },
        "model.UploadColumn": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "example": "3c79e7fd-1018-4a27-8b86-9cee84221cd8"
                },
                "index": {
                    "type": "integer",
                    "example": 0
                },
                "name": {
                    "type": "string",
                    "example": "Work Email"
                },
                "sample_data": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "example": [
                        "test@example.com"
                    ]
                },
                "template_column_id": {
                    "type": "string",
                    "example": "a1ed136d-33ce-4b7e-a7a4-8a5ccfe54cd5"
                },
                "upload_id": {
                    "type": "string",
                    "example": "50ca61e1-f683-4b03-9ec4-4b3adb592bf1"
                }
            }
        },
        "model.User": {
            "type": "object",
            "properties": {
                "email": {
                    "type": "string",
                    "example": "test@example.com"
                },
                "id": {
                    "type": "string",
                    "example": "249ac073-0fe8-4705-82ff-73e3df491b04"
                },
                "recipe": {
                    "type": "string",
                    "example": "github"
                },
                "role": {
                    "type": "string",
                    "example": "user"
                },
                "time_joined": {
                    "type": "integer",
                    "example": 1682366228
                }
            }
        },
        "types.Res": {
            "type": "object",
            "properties": {
                "error": {
                    "type": "string"
                },
                "message": {
                    "type": "string"
                }
            }
        },
        "web.ImporterCreateRequest": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string",
                    "example": "Test Importer"
                }
            }
        },
        "web.ImporterEditRequest": {
            "type": "object",
            "properties": {
                "allowed_domains": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "example": [
                        "example.com"
                    ]
                },
                "name": {
                    "type": "string",
                    "example": "Test Importer"
                },
                "webhook_url": {
                    "type": "string",
                    "example": "https://example.com/webhook"
                }
            }
        },
        "web.TemplateColumnCreateRequest": {
            "type": "object",
            "properties": {
                "key": {
                    "type": "string",
                    "example": "first_name"
                },
                "name": {
                    "type": "string",
                    "example": "First Name"
                },
                "required": {
                    "type": "boolean",
                    "example": false
                },
                "template_id": {
                    "type": "string",
                    "example": "f0797968-becc-422a-b135-19de1d8c5d46"
                }
            }
        }
    },
    "securityDefinitions": {
        "ApiKeyAuth": {
            "type": "apiKey",
            "name": "Authorization",
            "in": "header"
        }
    }
}